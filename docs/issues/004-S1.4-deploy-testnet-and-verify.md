---
id: S1.4
title: "Deploy testnet & verify"
epic: "E1 - Smart Contract Core"
sprint: "Sprint 1"
estimate: 3
labels: ["contract", "devops", "sprint-1"]
assignees: ["devops"]
dependencies: ["S1.2", "S1.3"]
status: "done"
---

## Solana migration (Deploy & IDL)

Context
- Deploy Solana program (.so) lên devnet/testnet.
- Publish hoặc upgrade IDL on-chain qua Anchor.
- Tự động ghi lại thông tin deploy (Program ID, cluster, slot, explorer URL).
- Cập nhật biến môi trường FE (`VITE_PROGRAM_ID`, `VITE_SOLANA_CLUSTER`).

Scope (Solana)
- `scripts/solana-deploy.sh`: build, deploy, publish IDL, lưu `solana/deployments.json`, cập nhật `frontend/.env`.
- `scripts/solana-verify.sh`: verify `solana program show`, so sánh Program ID với `frontend/.env`, kiểm tra IDL on-chain.

Acceptance Criteria
- Program deploy thành công (Anchor confirm).
- IDL được publish (anchor idl init hoặc anchor idl upgrade).
- `frontend/.env` cập nhật đúng `VITE_PROGRAM_ID` & cluster.
- `scripts/README.md` có hướng dẫn cụ thể.

Tasks
- Cập nhật/kiểm tra `scripts/solana-deploy.sh`.
- Bổ sung/kiểm tra `scripts/solana-verify.sh` (verify mode).
- Lưu `solana/deployments.json` và cập nhật `scripts/README.md`.

