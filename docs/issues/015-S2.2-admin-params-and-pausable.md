---
id: S2.2
title: "Admin params & Pausable"
epic: "E1 - Contract v2 features"
sprint: "Sprint 2"
estimate: 5
labels: ["contract", "admin", "sprint-2"]
assignees: ["be1"]
dependencies: ["S1.2"]
status: "done"
---

## Context
Cho phép cập nhật tham số vòng tiếp theo và pause/unpause an toàn.

## Scope
- setParamsForNext
- pause/unpause
- tests

## Acceptance Criteria
- Chỉ owner có thể thay đổi
- Test pass

## Tasks
- Implement setters & Pausable
- Unit tests permissions

## Result
- Added admin controls to `ChocoChocoGame.sol`:
	- `Ownable` for owner-only access
	- `Pausable` with `pause()` / `unpause()`
	- `setParamsForNext(...)` to update defaults for the next round: stake, commit/reveal durations, feeBps, forfeit mode/bps
	- Next round now uses admin-configurable defaults (stake/fee/durations/forfeit)
- Kept `claimTreat` and `settleRound` available while paused to allow withdrawals/settlement in emergencies; `commitMeow` and `revealMeow` are blocked when paused.
- Emitted `NextParamsUpdated` on setter.

## Tests
- `testOnlyOwnerCanPauseUnpause`
- `testPauseBlocksCommitReveal_AllowsClaim`
- `testSetParamsForNext_AppliesOnNewRound`
- `testOnlyOwnerCanSetParamsForNext`

All tests pass: 27/27.
