---
id: S2.4
title: "Indexing setup (Solana logs/events)"
epic: "E4 - Analytics & Leaderboard"
sprint: "Sprint 2"
estimate: 8
labels: ["analytics", "subgraph", "sprint-2"]
assignees: ["devops"]
dependencies: ["S1.4"]
status: "open"
---

## Solana migration (Indexing)

Context
- Thiết lập indexer lắng nghe Anchor events/logs để thay thế The Graph (EVM).

Scope (Solana)
- Listener `connection.onLogs` hoặc Helius Streams; lưu vào DB các entities: Round, PlayerRound, Claim, TreasuryFee.
- Expose API đơn giản cho FE truy vấn leaderboard.

Acceptance Criteria
- Indexer chạy trên devnet/testnet, dữ liệu đúng và có thể query.

Tasks
- Khởi tạo service indexer, schema và endpoints; tài liệu hóa cách chạy/deploy.

## Context
Lập chỉ mục events: RoundCreated, MeowCommitted, MeowRevealed, RoundMeowed, TreatClaimed.

## Scope
- Entities: Round, PlayerRound, Claim, TreasuryFee
- Mappings & handlers

## Acceptance Criteria
- Subgraph deploy testnet OK
- Queries trả dữ liệu đúng

## Tasks
- Khởi tạo subgraph
- Viết schema & mapping
- Deploy & document
